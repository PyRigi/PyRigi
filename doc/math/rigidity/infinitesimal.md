# Infinitesimal Rigidity


:::{prf:definition} Rigidity matrix
:label: def-rigidity-matrix

Let $(G, p)$ be a $d$-dimensional {prf:ref}`framework <def-framework>` with $G = (V, E)$.
The _rigidity matrix_ $R(G, p)$ of $(G, p)$ is the $|E| \times d|V|$ matrix whose row labelled by $uv \in E$ is

\begin{equation*}
  \begin{array}{rccccccccccccl}
    &   &        &   & u     & &       &        & v \\
  ( & 0 & \cdots & 0 & p_u - p_v & 0 & \cdots & 0 & p_v - p_u & 0 & \cdots & 0 &) \,.
  \end{array}
\end{equation*}

{{pyrigi_crossref}} {meth}`~.Framework.rigidity_matrix`
:::


:::{prf:definition} Infinitesimal flexes
:label: def-inf-flex

Let $(G, p)$ be a $d$-dimensional {prf:ref}`framework <def-framework>` with $G = (V, E)$.
An _infinitesimal flex_ of $(G, p)$ is a collection $(q_v)_{v \in V}$ of elements in $\RR^n$ such that

\begin{equation*}
 (p_u - p_v) \cdot (q_u - q_v) = 0
 \quad \text{for all } uv \in E\,.
\end{equation*}

In other words, if we form a $d|V| \times 1$ vector $q$ out of an infinitesimal flex, then $q$ lies in the kernel of the {prf:ref}`rigidity matrix <def-rigidity-matrix>` $R(G, p)$.

{{pyrigi_crossref}} {meth}`~.Framework.inf_flexes`
{meth}`~.Framework.is_dict_inf_flex`
{meth}`~.Framework.is_vector_inf_flex`
:::


:::{prf:definition} Trivial infinitesimal flexes
:label: def-trivial-inf-flex

Let $(G, p)$ be a $d$-dimensional {prf:ref}`framework <def-framework>` with $G = (V, E)$.
A _trivial infinitesimal flex_ is any element of the vector subspace of $\RR^{d|V|}$
generated by the following elements:

* $(e_i)_{v \in V}$ where $e_i$ is the $i$-th element of the standard basis of $\RR^d$;
* $(A \cdot p_v)_{v \in V}$ where $A$ is any $d \times d$ skew-symmetric matrix.

An {prf:ref}`infinitesimal flex <def-inf-flex>` that is not {prf:ref}`trivial <def-trivial-inf-flex>` is called a _nontrivial infinitesimal flex_.

{{pyrigi_crossref}} {meth}`~.Framework.trivial_inf_flexes`
{meth}`~.Framework.is_trivial_flex`
{meth}`~.Framework.is_trivial_flex`
{meth}`~.Framework.is_vector_trivial_inf_flex`
{meth}`~.Framework.is_dict_trivial_inf_flex`
{meth}`~.Framework.nontrivial_inf_flexes`
{meth}`~.Framework.is_nontrivial_flex`
{meth}`~.Framework.is_vector_nontrivial_inf_flex`
{meth}`~.Framework.is_dict_nontrivial_inf_flex`
:::


:::{prf:definition} Infinitesimally rigid frameworks
:label: def-inf-rigid-framework

A {prf:ref}`framework <def-framework>` is called _infinitesimally rigid_, if all its {prf:ref}`infinitesimal flexes <def-inf-flex>` are {prf:ref}`trivial <def-trivial-inf-flex>`.
A {prf:ref}`framework <def-framework>` is called _infinitesimally flexible_, if it is not infinitesimally rigid.

Let $(G, p)$ be a $d$-dimensional framework with $G = (V, E)$.
If $|V| \geq d+1$, the framework $(G, p)$ is infinitesimally rigid if and only if the {prf:ref}`rigidity matrix <def-rigidity-matrix>` $R(G, p)$ has rank $d|V| - \binom{d+1}{2}$.
If $|V| \leq d+1$, the framework $(G, p)$ is infinitesimally rigid if and only if $G$ is complete, $p$ is injective and the set $\{ p_v \, : \, v \in V\}$ is affinely independent.

{{pyrigi_crossref}} {meth}`~.Framework.is_inf_rigid`
{meth}`~.Framework.is_inf_flexible`
:::


:::{prf:definition} Regular frameworks
:label: def-regular-frameworks

A $d$-dimensional {prf:ref}`framework <def-framework>` $(G, p)$ is called _regular_ if

\begin{equation*}
 \mathrm{rk} \, R(G, p) \geq \mathrm{rk} \, R(G, p')
\end{equation*}

for any other $d$-dimensional framework $(G, p')$.
:::


:::{prf:definition} Independent framework
:label: def-independent-framework

A $d$-dimensional {prf:ref}`framework <def-framework>` $(G, p)$ with $G = (V, E)$
is called _independent_ if $\mathrm{rk} \, R(G, p) = |E|$,
otherwise it is dependent.

{{pyrigi_crossref}} {meth}`~.Framework.is_independent` 
{meth}`~.Framework.is_dependent`
:::

:::{prf:definition} Isostatic frameworks
:label: def-isostatic-frameworks

A {prf:ref}`framework <def-framework>` $(G, p)$ is called _isostatic_ if it is {prf:ref}`infinitesimally rigid <def-inf-rigid-framework>` and {prf:ref}`independent <def-independent-framework>`.

{{pyrigi_crossref}} {meth}`~.Framework.is_isostatic`
:::


:::{prf:definition} Minimally rigid frameworks
:label: def-min-rigid-framework

Let $(G,p)$ be a $d$-dimensional {prf:ref}`framework <def-framework>`.
The framework $(G, p)$ is called _minimally (infinitesimally) $d$-rigid_
if removing any edge from $G$ yields an ({prf:ref}`infinitesimally <def-inf-rigid-framework>`) {prf:ref}`flexible framework <def-cont-rigid-framework>`.

{{pyrigi_crossref}} {meth}`~.Framework.is_min_inf_rigid`
:::

:::{prf:definition} Equilibrium stress
:label: def-equilibrium-stress

Let $(G,p)$ be a $d$-dimensional {prf:ref}`framework <def-framework>` with $G=(V,E)$.
An _equilibrium stress_ (or just a _stress_) of $(G,p)$ is a map $\omega\colon E\rightarrow \RR$ such that for every $v\in V$
\begin{equation*}
 \sum_{vw\in E}\omega(vw)(p(v)-p(w)) = 0.
\end{equation*}
Equivalently, interpreting $\omega$ as a row vector, $\omega$ is an equilibrium stress if and only if $\omega \cdot R(G,p) = 0$.

{{pyrigi_crossref}} {meth}`~.Framework.stresses` 
{meth}`~.Framework.is_stress`
:::

:::{prf:definition} Stress Matrix 
:label: def-stress-matrix

Let $(G,p)$ be a $d$-dimensional {prf:ref}`framework <def-framework>` with $G=(V,E)$ and $\omega$ be an {prf:ref}`equilibrium stress <def-equilibrium-stress>`.
A _stress matrix_ of $(G,\omega)$ is the $|V|\times|V|$ matrix $\Omega(G,\omega)$ where, for every pair of vertices $v,w$, we have the entry:

$$
\Omega(G,\omega)_{(v,w)} :=
\begin{cases}
 \sum_{vw\in E}\omega(vw) & \mbox{if $v=w$}\\
 -\omega(vw) & \mbox{if $vw\in E$ and $v\neq w$}\\
 0 & \mbox{otherwise}
\end{cases}
$$

{{pyrigi_crossref}} {meth}`~.Framework.stress_matrix`
:::